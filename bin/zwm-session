#!/bin/sh

PREFIX=/usr/local/sbcl
export SBCL_HOME=$PREFIX/lib/sbcl
export PATH=$PREFIX/bin:$PATH

SELECT=${1:-stumpwm}

usage() {
    cat <<EOF
$(basename $0) {stumpwm|clfswm}
stumpwm   -- default
clfswm    -- option
EOF
}

stumpwm() {
    [ -f ~/.zwmrc ] && . ~/.zwmrc
    exec sbcl \
         --eval '(ql:quickload :stumpwm)' \
         --eval '(stumpwm:stumpwm)'
}

clfswm() {
    [ -f ~/.zwmrc ] && . ~/.zwmrc
    exec sbcl \
         --eval '(ql:quickload :clfswm)' \
         --eval '(clfswm:main)'
}

case $SELECT in
    stumpwm )
        stumpwm
        ;;
    clfswm )
        clfswm
        ;;
    --help|-h )
        usage
        ;;
esac
