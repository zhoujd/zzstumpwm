#!/bin/sh

# Select window manager
echo "You can also run: $(basename $0) {stumpwm|clfswm}"

# SBCL config
PREFIX=/usr/local/sbcl
export SBCL_HOME=$PREFIX/lib/sbcl
export SBCL_PATH=$PREFIX/bin/sbcl

# Stumpwm as default
WM_SELECT=${1:-stumpwm}

# Source zwmrc
[ -f ~/.zwmrc ] && . ~/.zwmrc

# Start window manager
case $WM_SELECT in
    stumpwm )
        exec $SBCL_PATH --eval '(ql:quickload :stumpwm)' \
                        --eval '(stumpwm:stumpwm)'
        ;;
    clfswm )
        exec $SBCL_PATH --eval '(ql:quickload :clfswm)' \
                        --eval '(clfswm:main)'
        ;;
esac
